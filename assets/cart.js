"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _createSuper(r){var o=_isNativeReflectConstruct();return function(){var t,e=_getPrototypeOf(r);return _possibleConstructorReturn(this,o?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(e,t)})(t)}function _construct(t,e,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(t,e,r){var o=[null];o.push.apply(o,e);e=new(Function.bind.apply(t,o));return r&&_setPrototypeOf(e,r.prototype),e}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function o(n,i,c){function u(e,t){if(!i[e]){if(!n[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(a)return a(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=i[e]={exports:{}},n[e][0].call(r.exports,function(t){return u(n[e][1][t]||t)},r,r.exports,o,n,i,c)}return i[e].exports}for(var a="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,r){customElements.get("cart-main")||customElements.define("cart-main",function(){_inherits(e,_wrapNativeSuper(HTMLElement));var t=_createSuper(e);function e(){return _classCallCheck(this,e),t.call(this)}return _createClass(e,[{key:"connectedCallback",value:function(){this.initCart()}},{key:"initCart",value:function(){var e=this;this.faqQuestion=this.querySelectorAll(".cart_totals-faq_question"),this.productRemove=this.querySelectorAll(".cart_line_item-remove"),this.productQty=this.querySelectorAll(".cart_line_item-qty"),this.cartDrawerTrigger=document.querySelector(".open_cart_drawer"),this.cartDrawerTriggerMobile=document.querySelector(".open_cart_drawer_mobile"),this.html=document.querySelector(".ui-mobile"),this.faqQuestion.forEach(function(t){t.addEventListener("click",function(t){e.faq(t)})}),window.PubSub.subscribe("CART:STATE_UPDATED",function(){e.updateCart()}),this.cartDrawerTrigger.disabled=!0,this.cartDrawerTriggerMobile.disabled=!0,this.productRemove.forEach(function(t){t.addEventListener("click",function(t){e.removeProduct(t.target.dataset.variant_id)})}),this.productQty.forEach(function(t){t.addEventListener("click",function(t){e.changeCount(t.target.dataset.variant_id,t.target.dataset.quantity)})})}},{key:"updateCart",value:function(){var e=this;fetch(window.Shopify.routes.root+"?section_id=".concat(this.dataset.sectionid)).then(function(t){return t.text()}).then(function(t){t=(new DOMParser).parseFromString(t,"text/html");e.innerHTML=t.querySelector(".cart_container").innerHTML,e.initCart()}).catch(function(t){console.error("Error",t)})}},{key:"removeProduct",value:function(t){var e=this,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:0})};fetch(window.Shopify.routes.root+"cart/change.js",t).then(function(t){if(t.ok)return t.json();throw new Error("Network response was not ok")}).then(function(t){window.PubSub.publish("CART:STATE_UPDATED"),e.updateCart()}).catch(function(t){console.error("Error:",t)})}},{key:"changeCount",value:function(t,e){var r=this,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:e})};fetch(window.Shopify.routes.root+"cart/change.js",t).then(function(t){if(t.ok)return t.json();throw new Error("Network response was not ok")}).then(function(t){r.updateCart()}).catch(function(t){console.error("Error:",t)})}},{key:"faq",value:function(t){t.target.closest(".cart_totals-faq_item").classList.value.includes("active")?t.target.closest(".cart_totals-faq").querySelectorAll(".cart_totals-faq_item").forEach(function(t){t.classList.remove("active")}):(t.target.closest(".cart_totals-faq").querySelectorAll(".cart_totals-faq_item").forEach(function(t){t.classList.remove("active")}),t.target.closest(".cart_totals-faq_item").classList.toggle("active"))}}]),e}())},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY2FydC5qcyIsImNhcnQuanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiY3VzdG9tRWxlbWVudHMiLCJnZXQiLCJkZWZpbmUiLCJfaW5oZXJpdHMiLCJDdXN0b21Qcm9kdWN0IiwiX3dyYXBOYXRpdmVTdXBlciIsIkhUTUxFbGVtZW50IiwiX3N1cGVyIiwiX2NyZWF0ZVN1cGVyIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiaW5pdENhcnQiLCJfdGhpcyIsImZhcVF1ZXN0aW9uIiwicXVlcnlTZWxlY3RvckFsbCIsInByb2R1Y3RSZW1vdmUiLCJwcm9kdWN0UXR5IiwiY2FydERyYXdlclRyaWdnZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjYXJ0RHJhd2VyVHJpZ2dlck1vYmlsZSIsImh0bWwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZhcSIsIndpbmRvdyIsIlB1YlN1YiIsInN1YnNjcmliZSIsInVwZGF0ZUNhcnQiLCJkaXNhYmxlZCIsInJlbW92ZVByb2R1Y3QiLCJ0YXJnZXQiLCJkYXRhc2V0IiwidmFyaWFudF9pZCIsImNoYW5nZUNvdW50IiwicXVhbnRpdHkiLCJfdGhpczIiLCJmZXRjaCIsIlNob3BpZnkiLCJyb3V0ZXMiLCJyb290IiwiY29uY2F0Iiwic2VjdGlvbmlkIiwidGhlbiIsInJlcyIsInRleHQiLCJkYXRhIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiaW5uZXJIVE1MIiwiZXJyb3IiLCJjb25zb2xlIiwiaWQiLCJfdGhpczMiLCJyZXF1ZXN0T3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwib2siLCJqc29uIiwicHVibGlzaCIsIl90aGlzNCIsImNsb3Nlc3QiLCJjbGFzc0xpc3QiLCJpbmNsdWRlcyIsInJlbW92ZSIsInRvZ2dsZSJdLCJtYXBwaW5ncyI6InEzR0FBQSxDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxHQUFBLENBQUFKLEVBQUFHLEdBQUEsQ0FBQSxHQUFBLENBQUFKLEVBQUFJLEdBQUEsQ0FBQSxJQUFBRSxFQUFBLFlBQUEsT0FBQUMsU0FBQUEsUUFBQSxHQUFBLENBQUFGLEdBQUFDLEVBQUEsT0FBQUEsRUFBQUYsRUFBQSxDQUFBLENBQUEsRUFBQSxHQUFBSSxFQUFBLE9BQUFBLEVBQUFKLEVBQUEsQ0FBQSxDQUFBLEVBQUEsTUFBQUssRUFBQSxJQUFBQyxNQUFBLHVCQUFBTixFQUFBLEdBQUEsR0FBQU8sS0FBQSxtQkFBQUYsQ0FBQSxDQUFBRyxFQUFBWCxFQUFBRyxHQUFBLENBQUFTLFFBQUEsRUFBQSxFQUFBYixFQUFBSSxHQUFBLEdBQUFVLEtBQUFGLEVBQUFDLFFBQUEsU0FBQWQsR0FBQSxPQUFBSSxFQUFBSCxFQUFBSSxHQUFBLEdBQUFMLElBQUFBLENBQUEsQ0FBQSxFQUFBYSxFQUFBQSxFQUFBQyxRQUFBZCxFQUFBQyxFQUFBQyxFQUFBQyxDQUFBLENBQUEsQ0FBQSxPQUFBRCxFQUFBRyxHQUFBUyxPQUFBLENBQUEsSUFBQSxJQUFBTCxFQUFBLFlBQUEsT0FBQUQsU0FBQUEsUUFBQUgsRUFBQSxFQUFBQSxFQUFBRixFQUFBYSxPQUFBWCxDQUFBLEdBQUFELEVBQUFELEVBQUFFLEVBQUEsRUFBQSxPQUFBRCxDQUFBLEVBQUEsQ0FBQWEsRUFBQSxDQUFBLFNBQUFULEVBQUFVLEVBQUFKLEdDQUFLLGVBQUFDLElBQUEsV0FBQSxHQUNBRCxlQUFBRSxPQUFBLFlBQUEsV0FBQUMsVUFBQUMsRUF1SEFDLGlCQXZIQUMs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KGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaWYgKCFjdXN0b21FbGVtZW50cy5nZXQoJ2NhcnQtbWFpbicpKSB7XHJcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdjYXJ0LW1haW4nLCBjbGFzcyBDdXN0b21Qcm9kdWN0IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgIHRoaXMuaW5pdENhcnQoKVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRDYXJ0KCkge1xyXG4gICAgICB0aGlzLmZhcVF1ZXN0aW9uID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydF90b3RhbHMtZmFxX3F1ZXN0aW9uJylcclxuICAgICAgdGhpcy5wcm9kdWN0UmVtb3ZlID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydF9saW5lX2l0ZW0tcmVtb3ZlJylcclxuICAgICAgdGhpcy5wcm9kdWN0UXR5ID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydF9saW5lX2l0ZW0tcXR5JylcclxuICAgICAgdGhpcy5jYXJ0RHJhd2VyVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuX2NhcnRfZHJhd2VyJylcclxuICAgICAgdGhpcy5jYXJ0RHJhd2VyVHJpZ2dlck1vYmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuX2NhcnRfZHJhd2VyX21vYmlsZScpXHJcbiAgICAgIHRoaXMuaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51aS1tb2JpbGUnKVxyXG4gICAgICB0aGlzLmZhcVF1ZXN0aW9uLmZvckVhY2goKGUpID0+IHtcclxuICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgIHRoaXMuZmFxKGUpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgd2luZG93LlB1YlN1Yi5zdWJzY3JpYmUoJ0NBUlQ6U1RBVEVfVVBEQVRFRCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNhcnQoKVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5jYXJ0RHJhd2VyVHJpZ2dlci5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMuY2FydERyYXdlclRyaWdnZXJNb2JpbGUuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLnByb2R1Y3RSZW1vdmUuZm9yRWFjaCgoZSkgPT4ge1xyXG4gICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVQcm9kdWN0KGUudGFyZ2V0LmRhdGFzZXQudmFyaWFudF9pZClcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgICB0aGlzLnByb2R1Y3RRdHkuZm9yRWFjaCgoZSkgPT4ge1xyXG4gICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VDb3VudChlLnRhcmdldC5kYXRhc2V0LnZhcmlhbnRfaWQsIGUudGFyZ2V0LmRhdGFzZXQucXVhbnRpdHkpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDYXJ0KCkge1xyXG4gICAgICBmZXRjaCh3aW5kb3cuU2hvcGlmeS5yb3V0ZXMucm9vdCArIGA/c2VjdGlvbl9pZD0ke3RoaXMuZGF0YXNldC5zZWN0aW9uaWR9YClcclxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMudGV4dCgpKVxyXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBodG1sID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhkYXRhLCAndGV4dC9odG1sJylcclxuICAgICAgICAgIHRoaXMuaW5uZXJIVE1MID0gaHRtbC5xdWVyeVNlbGVjdG9yKCcuY2FydF9jb250YWluZXInKS5pbm5lckhUTUxcclxuICAgICAgICAgIHRoaXMuaW5pdENhcnQoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yJywgZXJyb3IpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlUHJvZHVjdChpZCkge1xyXG4gICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgJ2lkJzogaWQsXHJcbiAgICAgICAgICAncXVhbnRpdHknOiAwLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9O1xyXG4gICAgICBmZXRjaCh3aW5kb3cuU2hvcGlmeS5yb3V0ZXMucm9vdCArICdjYXJ0L2NoYW5nZS5qcycsIHJlcXVlc3RPcHRpb25zKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBvaycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICB3aW5kb3cuUHViU3ViLnB1Ymxpc2goJ0NBUlQ6U1RBVEVfVVBEQVRFRCcpXHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZUNhcnQoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZUNvdW50KGlkLCBxdWFudGl0eSkge1xyXG4gICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgJ2lkJzogaWQsXHJcbiAgICAgICAgICAncXVhbnRpdHknOiBxdWFudGl0eSxcclxuICAgICAgICB9KSxcclxuICAgICAgfTtcclxuICAgICAgZmV0Y2god2luZG93LlNob3BpZnkucm91dGVzLnJvb3QgKyAnY2FydC9jaGFuZ2UuanMnLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVDYXJ0KClcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmYXEoZSkge1xyXG4gICAgICBlLnRhcmdldC5jbG9zZXN0KCcuY2FydF90b3RhbHMtZmFxX2l0ZW0nKS5jbGFzc0xpc3QudmFsdWUuaW5jbHVkZXMoJ2FjdGl2ZScpXHJcbiAgICAgICAgP1xyXG4gICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5jYXJ0X3RvdGFscy1mYXEnKS5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydF90b3RhbHMtZmFxX2l0ZW0nKS5mb3JFYWNoKFxyXG4gICAgICAgICAgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICA6XHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLmNhcnRfdG90YWxzLWZhcScpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJ0X3RvdGFscy1mYXFfaXRlbScpLmZvckVhY2goXHJcbiAgICAgICAgICAgIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLmNhcnRfdG90YWxzLWZhcV9pdGVtJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJylcclxuICAgICAgICApXHJcbiAgICB9XHJcblxyXG4gIH0pXHJcbn0iLCIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbmlmICghY3VzdG9tRWxlbWVudHMuZ2V0KCdjYXJ0LW1haW4nKSkge1xyXG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnY2FydC1tYWluJywgY2xhc3MgQ3VzdG9tUHJvZHVjdCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICB0aGlzLmluaXRDYXJ0KClcclxuICAgIH1cclxuXHJcbiAgICBpbml0Q2FydCgpIHtcclxuICAgICAgdGhpcy5mYXFRdWVzdGlvbiA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLmNhcnRfdG90YWxzLWZhcV9xdWVzdGlvbicpXHJcbiAgICAgIHRoaXMucHJvZHVjdFJlbW92ZSA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLmNhcnRfbGluZV9pdGVtLXJlbW92ZScpXHJcbiAgICAgIHRoaXMucHJvZHVjdFF0eSA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLmNhcnRfbGluZV9pdGVtLXF0eScpXHJcbiAgICAgIHRoaXMuY2FydERyYXdlclRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3Blbl9jYXJ0X2RyYXdlcicpXHJcbiAgICAgIHRoaXMuY2FydERyYXdlclRyaWdnZXJNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3Blbl9jYXJ0X2RyYXdlcl9tb2JpbGUnKVxyXG4gICAgICB0aGlzLmh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudWktbW9iaWxlJylcclxuICAgICAgdGhpcy5mYXFRdWVzdGlvbi5mb3JFYWNoKChlKSA9PiB7XHJcbiAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmZhcShlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIHdpbmRvdy5QdWJTdWIuc3Vic2NyaWJlKCdDQVJUOlNUQVRFX1VQREFURUQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDYXJ0KClcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuY2FydERyYXdlclRyaWdnZXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmNhcnREcmF3ZXJUcmlnZ2VyTW9iaWxlLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5wcm9kdWN0UmVtb3ZlLmZvckVhY2goKGUpID0+IHtcclxuICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlUHJvZHVjdChlLnRhcmdldC5kYXRhc2V0LnZhcmlhbnRfaWQpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgdGhpcy5wcm9kdWN0UXR5LmZvckVhY2goKGUpID0+IHtcclxuICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgIHRoaXMuY2hhbmdlQ291bnQoZS50YXJnZXQuZGF0YXNldC52YXJpYW50X2lkLCBlLnRhcmdldC5kYXRhc2V0LnF1YW50aXR5KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ2FydCgpIHtcclxuICAgICAgZmV0Y2god2luZG93LlNob3BpZnkucm91dGVzLnJvb3QgKyBgP3NlY3Rpb25faWQ9JHt0aGlzLmRhdGFzZXQuc2VjdGlvbmlkfWApXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLnRleHQoKSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgaHRtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoZGF0YSwgJ3RleHQvaHRtbCcpXHJcbiAgICAgICAgICB0aGlzLmlubmVySFRNTCA9IGh0bWwucXVlcnlTZWxlY3RvcignLmNhcnRfY29udGFpbmVyJykuaW5uZXJIVE1MXHJcbiAgICAgICAgICB0aGlzLmluaXRDYXJ0KClcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcicsIGVycm9yKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVByb2R1Y3QoaWQpIHtcclxuICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICdpZCc6IGlkLFxyXG4gICAgICAgICAgJ3F1YW50aXR5JzogMCxcclxuICAgICAgICB9KSxcclxuICAgICAgfTtcclxuICAgICAgZmV0Y2god2luZG93LlNob3BpZnkucm91dGVzLnJvb3QgKyAnY2FydC9jaGFuZ2UuanMnLCByZXF1ZXN0T3B0aW9ucylcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgd2luZG93LlB1YlN1Yi5wdWJsaXNoKCdDQVJUOlNUQVRFX1VQREFURUQnKVxyXG4gICAgICAgICAgdGhpcy51cGRhdGVDYXJ0KClcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VDb3VudChpZCwgcXVhbnRpdHkpIHtcclxuICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICdpZCc6IGlkLFxyXG4gICAgICAgICAgJ3F1YW50aXR5JzogcXVhbnRpdHksXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH07XHJcbiAgICAgIGZldGNoKHdpbmRvdy5TaG9waWZ5LnJvdXRlcy5yb290ICsgJ2NhcnQvY2hhbmdlLmpzJywgcmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTmV0d29yayByZXNwb25zZSB3YXMgbm90IG9rJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgIHRoaXMudXBkYXRlQ2FydCgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZmFxKGUpIHtcclxuICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLmNhcnRfdG90YWxzLWZhcV9pdGVtJykuY2xhc3NMaXN0LnZhbHVlLmluY2x1ZGVzKCdhY3RpdmUnKVxyXG4gICAgICAgID9cclxuICAgICAgICBlLnRhcmdldC5jbG9zZXN0KCcuY2FydF90b3RhbHMtZmFxJykucXVlcnlTZWxlY3RvckFsbCgnLmNhcnRfdG90YWxzLWZhcV9pdGVtJykuZm9yRWFjaChcclxuICAgICAgICAgIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgOlxyXG4gICAgICAgIChcclxuICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5jYXJ0X3RvdGFscy1mYXEnKS5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydF90b3RhbHMtZmFxX2l0ZW0nKS5mb3JFYWNoKFxyXG4gICAgICAgICAgICAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5jYXJ0X3RvdGFscy1mYXFfaXRlbScpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICB9KVxyXG59XG59LHt9XX0se30sWzFdKVxuXG4iXX0=
